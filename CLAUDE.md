# MAGI System

The system contains a node front end which is used to interact with a docker container running a node backend. The node server is responsible for managing the docker containers and streaming output back to the web interface. The web interface is built using TypeScript, and uses socket.io for real-time communication.

## Structure

The project is organized as follows:

- `magi/`: Python backend with agent implementations
    - `magi_agents/`: Specialized agent implementations
    - `docker/`: Docker configuration
    - `utils/`: Shared utility modules
- `controller/`: TypeScript source for the Node.js server and client
    - `client/`: Frontend TypeScript/CSS/HTML files
        - `css/`: Stylesheet files
        - `html/`: HTML templates
    - `server/`: Server TypeScript files
- `utils/`: Node.js utilities for Docker and setup
- `dist/`: Compiled output (generated by TypeScript compiler)

## Communication flow

Client React (localhost:3011) <-> docker magi-controller (node/express server) <-> docker magi-system (node/typescript) <-> LLMs and tools.

## How to solve problems

- Always search the web to ensure you have up-to-date information about packages or code which you are working with.
- If the first solution fails, do more research before trying something else.
- **Never** add a simulation or mock code to solve an error. This can be done temporarily for debugging, but it should never be left in the code and a real solution should be implemented. **Always fix the underlying problem.**

## When debugging and fixing error messages

Only fix the actual problem. If you add code which doesn't work, then remove it. Do not suppress errors, or add mock code, actually fix the error.

### Live Reload

The system has live reload configured, so changes to CSS, JS, and HTML files will automatically refresh in the browser without needing to restart the server or manually reload the page.

### Testing Changes

1. Make changes to code
2. Lint all code with `npm run lint` (fix with `npm run lint:fix`)
3. Test magi docker backend with `test/magi-docker.sh -p "your prompt here"`
4. You can also test individual agents directly with node using `test/magi-node.sh -p "your prompt here" -a codes` where `code` is the name of the agent you want to test (`supervisor`, `code`, `browser`, `shell`, `search`, `reasoning` or `worker`)
5. Verify all changed functionality works
6. Fix ALL errors found during testing (related to changes or not)
7. Repeat steps 2 to 6 until no errors are found
8. With GitHub, commit final code and push

Changes should ALWAYS be tested after they are made. If any errors or warnings are found (regardless if they are related or not) they should be fixed immediately. Once no errors are found, final code should be committed and pushed as long as the task was completed successfully.
